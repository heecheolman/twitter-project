<template>
  <div class="tweet-content">
    <div class="tweet-content__header">
      <span-text
        :class="idStyle"
        :text="id" />
      <text-a
        :label="hash"
        :a-style="hashStyle" />
      <span-text
        :class="dateStyle"
        :text="date" />
    </div>
    <div class="tweet-content__body">
      <image-content
        v-for="(img, index) in contentFilenameList"
        :key="index"
        :filename="img.filename" />
      <p-text
        :class="pStyle"
        :content-text="contentText" />
    </div>
    <div class="tweet-content__action">
      <div class="tweet-content__action__list">
        <svg-button
          v-for="(button, index) in svgList"
          :class="svgButtonStyle"
          :key="index"
          :svg="button.svg" />
      </div>
    </div>
  </div>
</template>

<script>
import DateCalculator from './../../lib/DateCalculator';

import SpanText from './../atoms/SpanText';
import TextA from './../atoms/TextA';
import PText from './../atoms/PText';
import SvgButton from './../atoms/SvgButton';
import ImageContent from './../atoms/ImageContent';

export default {
  name: 'TweetContent',
  components: {
    SpanText,
    TextA,
    PText,
    SvgButton,
    ImageContent,
  },
  mounted() {
    this.updateTimelineId = this.updateTimelineDate();
  },
  destroyed() {
    clearInterval(this.updateTimelineId);
  },
  props: {
    id: {
    },
    contentText: {
      type: String,
    },
    contentDate: {
      type: String,
    },
    contentFilenameList: {
      type: Array,
    },
  },
  data() {
    return {
      idStyle: 'text--id',
      hash: '@fMUmSjMbVbjhqBO',
      hashStyle: 'text--hash',
      pStyle: 'text--tweet',
      date: '• ' + DateCalculator(this.contentDate),
      dateStyle: 'text--date',
      svgButtonStyle: 'svg--reply',
      updateTimelineId: null,
      svgList: [
        {
          svg: `<svg x="0px" y="0px" viewBox="0 0 30.333 30.333">
                    <path d="M0,26.75V11.908c0-4.59,3.735-8.325,8.325-8.325h13.681c4.591,0,8.327,3.735,8.327,8.325v2.56
                      c0,4.59-3.735,8.325-8.325,8.325H8.518L0,26.75z M8.325,5.439c-3.567,0-6.469,2.902-6.469,6.469v11.933l6.253-2.905h13.899
                      c3.567,0,6.469-2.902,6.469-6.469v-2.56c0-3.567-2.903-6.469-6.471-6.469H8.325V5.439z M8.937,11.767
                      c0.975,0,1.765,0.79,1.765,1.765s-0.79,1.765-1.765,1.765s-1.765-0.79-1.765-1.765S7.962,11.767,8.937,11.767z M21.395,11.767
                      c0.975,0,1.765,0.79,1.765,1.765s-0.79,1.765-1.765,1.765s-1.765-0.79-1.765-1.765S20.42,11.767,21.395,11.767z M15.165,11.767
                      c0.975,0,1.765,0.79,1.765,1.765s-0.79,1.765-1.765,1.765s-1.765-0.79-1.765-1.765S14.19,11.767,15.165,11.767z"/>
                </svg>`,
        },
        {
          svg: `<svg width="18px" height="18px" viewBox="0 0 64 64">
                    <path d="m15.486,25.515c0.398,0.454 0.952,0.687 1.507,0.687 0.478,0 0.958-0.172 1.345-0.518 0.832-0.75 0.906-2.043 0.165-2.887l-7.488-8.528c-0.014-0.015-0.032-0.021-0.046-0.034-0.029-0.031-0.057-0.06-0.088-0.088-0.016-0.015-0.02-0.033-0.035-0.047-0.073-0.066-0.163-0.09-0.241-0.144-0.093-0.062-0.177-0.142-0.275-0.187-0.037-0.018-0.075-0.027-0.112-0.041-0.108-0.041-0.219-0.052-0.331-0.074-0.108-0.021-0.211-0.057-0.323-0.06-0.021-0.001-0.038-0.012-0.058-0.012s-0.037,0.011-0.058,0.012c-0.112,0.003-0.217,0.038-0.327,0.06-0.112,0.022-0.221,0.033-0.327,0.074-0.037,0.014-0.074,0.023-0.11,0.041-0.101,0.045-0.184,0.124-0.278,0.187-0.08,0.054-0.171,0.078-0.244,0.144-0.016,0.015-0.02,0.034-0.035,0.049-0.03,0.027-0.058,0.056-0.085,0.086-0.014,0.014-0.031,0.02-0.046,0.034l-7.486,8.528c-0.741,0.844-0.666,2.137 0.168,2.887 0.385,0.346 0.863,0.518 1.34,0.518 0.557,0 1.11-0.232 1.509-0.687l3.96-4.511v23.445c0,3.383 2.717,6.134 6.058,6.134h29.14c1.115,0 2.019-0.915 2.019-2.044 0-1.13-0.903-2.045-2.019-2.045h-29.14c-1.115,0-2.02-0.918-2.02-2.045v-23.445l3.961,4.511z"/>
                    <path d="m60.473,38.652l-3.959,4.51v-23.445c0-3.383-2.718-6.134-6.058-6.134h-28.415c-1.117,0-2.02,0.915-2.02,2.044 0,1.13 0.902,2.045 2.02,2.045h28.415c1.115,0 2.02,0.918 2.02,2.045v23.445l-3.962-4.51c-0.742-0.844-2.016-0.92-2.852-0.168-0.832,0.75-0.906,2.043-0.166,2.886l7.489,8.527c0.012,0.015 0.032,0.019 0.044,0.032 0.029,0.032 0.059,0.062 0.09,0.092 0.014,0.013 0.02,0.031 0.035,0.045 0.095,0.084 0.206,0.125 0.309,0.189 0.033,0.021 0.062,0.048 0.1,0.066 0.047,0.025 0.085,0.07 0.134,0.092 0.018,0.008 0.037,0.01 0.055,0.018 0.241,0.096 0.49,0.151 0.744,0.151 0.251,0 0.504-0.055 0.743-0.151 0.018-0.008 0.037-0.01 0.056-0.018 0.049-0.021 0.086-0.065 0.131-0.09 0.033-0.019 0.059-0.044 0.091-0.062 0.109-0.064 0.226-0.109 0.321-0.195 0.016-0.015 0.02-0.034 0.035-0.049 0.03-0.028 0.058-0.058 0.087-0.088 0.012-0.014 0.031-0.018 0.043-0.032l7.488-8.527c0.74-0.843 0.665-2.136-0.169-2.886-0.835-0.752-2.11-0.675-2.849,0.168z"/>
                </svg>`
        },
        {
          svg: `<svg x="0px" y="0px" width="18px" height="18px" viewBox="0 0 979.494 979.494">
                    <path d="M964.616,227.519c-15.63-44.595-43.082-84.824-79.389-116.338c-36.341-31.543-80.051-53.048-126.404-62.188
                      c-17.464-3.444-35.421-5.19-53.371-5.19c-52.371,0-103.306,14.809-147.296,42.827c-26.482,16.867-49.745,38.022-68.908,62.484
                      c-19.158-24.415-42.405-45.53-68.859-62.364C376.42,58.773,325.52,43.985,273.189,43.985c-0.003,0,0.001,0-0.001,0
                      c-43.604,0-87.367,10.77-126.546,31.143c-39.15,20.358-73.104,49.978-98.188,85.658C22.752,197.343,7.096,238.278,1.92,282.453
                      c-4.532,38.687-1.032,80.217,10.405,123.436c22.656,85.615,72.803,163.707,110.882,214.142
                      c82.795,109.659,196.636,209.196,348.028,304.301l18.085,11.36l18.086-11.36C693.624,807.35,823.602,683.842,904.764,546.749
                      c46.678-78.844,70.994-149.084,74.343-214.733C980.972,295.429,976.096,260.271,964.616,227.519z M489.322,855.248
                      c-135.253-87.096-237.398-177.586-311.846-276.192c-34.407-45.571-79.583-115.623-99.414-190.562
                      c-9.245-34.937-12.14-67.951-8.604-98.128c3.846-32.824,15.494-63.262,34.623-90.47c18.844-26.803,44.41-49.085,73.932-64.436
                      c29.533-15.357,62.444-23.474,95.176-23.474c39.377,0,77.654,11.113,110.692,32.136c32.204,20.492,58.094,49.399,74.868,83.596
                      l30.559,62.292l30.505-62.318c16.759-34.238,42.648-63.183,74.872-83.705c33.057-21.054,71.358-32.182,110.767-32.182
                      c13.544,0,27.074,1.314,40.216,3.905c34.739,6.85,67.585,23.042,94.986,46.826c27.39,23.774,48.064,54.023,59.79,87.476
                      c8.547,24.385,12.164,50.811,10.75,78.542c-2.772,54.379-24.017,114.42-64.944,183.553
                      C773.338,635.262,656.457,747.659,489.322,855.248z"/>
                </svg>`,
        },
      ],
    };
  },
  methods: {
    updateTimelineDate() {
      setInterval(() => {
        this.date = '• ' + DateCalculator(this.contentDate);
      }, 30000);

    },
  },
}
</script>
<style scoped>
  .tweet-content {
    width: 506px;
    height: auto;
    margin-left: 58px;
  }
  .tweet-content__body {
    width: 100%;
  }
  .tweet-content__action {
    padding-top: 1px;
    width: 100%;
    height: 30px;
  }
  .tweet-content__action__list {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-right: 300px;
    font-size: 0;
    height: 18px;
    line-height: 1;
    margin-bottom: 2px;
    margin-top: 10px;
  }
</style>
